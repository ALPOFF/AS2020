{"ast":null,"code":"import _regeneratorRuntime from\"D:\\\\web\\\\AS2020\\\\web\\\\dron-taxi-web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"D:\\\\web\\\\AS2020\\\\web\\\\dron-taxi-web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _objectSpread from\"D:\\\\web\\\\AS2020\\\\web\\\\dron-taxi-web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import{getCurUsD,getCurUsRoleD,getOrders}from\"./api\";var AUTH='AUTH';var SET_USER_DATA='SET_USER_DATA';var SET_USER_DATA_ROLE='SET_USER_DATA_ROLE';var SET_ORDERS='SET_ORDERS';var ath;localStorage.getItem('id')==null?ath=true:ath=localStorage.getItem('id');var initialState={isAuth:ath,userData:[],userDataRole:[],orders:[]};var appReducer=function appReducer(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:initialState;var action=arguments.length>1?arguments[1]:undefined;switch(action.type){case AUTH:return _objectSpread(_objectSpread({},state),{},{isAuth:action.isAuth});case SET_USER_DATA:return _objectSpread(_objectSpread({},state),{},{userData:action.userData});case SET_USER_DATA_ROLE:return _objectSpread(_objectSpread({},state),{},{userDataRole:action.userDataRole});case SET_ORDERS:return _objectSpread(_objectSpread({},state),{},{orders:action.orders});default:return state;}};export var setIsAuth=function setIsAuth(isAuth){return{type:AUTH,isAuth:isAuth};};export var setUserData=function setUserData(userData){return{type:SET_USER_DATA,userData:userData};};export var setUserDataRole=function setUserDataRole(userDataRole){return{type:SET_USER_DATA_ROLE,userDataRole:userDataRole};};export var setOrders=function setOrders(orders){return{type:SET_ORDERS,orders:orders};};export var setUserDataQ=function setUserDataQ(currentUserId){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return getCurUsD(currentUserId);case 2:response=_context.sent;dispatch(setUserData(response.data));case 4:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();};export var setUserDataRoleQ=function setUserDataRoleQ(currentUserId){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch){var response;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return getCurUsRoleD(currentUserId);case 2:response=_context2.sent;dispatch(setUserDataRole(response.data));case 4:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref2.apply(this,arguments);};}();};export var setCurOrders=function setCurOrders(currentUserId){return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dispatch){var response;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return getOrders(currentUserId);case 2:response=_context3.sent;dispatch(setOrders(response.data));case 4:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x3){return _ref3.apply(this,arguments);};}();};export default appReducer;","map":{"version":3,"sources":["D:/web/AS2020/web/dron-taxi-web/src/state/app-reducer.js"],"names":["getCurUsD","getCurUsRoleD","getOrders","AUTH","SET_USER_DATA","SET_USER_DATA_ROLE","SET_ORDERS","ath","localStorage","getItem","initialState","isAuth","userData","userDataRole","orders","appReducer","state","action","type","setIsAuth","setUserData","setUserDataRole","setOrders","setUserDataQ","currentUserId","dispatch","response","data","setUserDataRoleQ","setCurOrders"],"mappings":"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","sourcesContent":["import {getCurUsD, getCurUsRoleD, getOrders} from \"./api\";\r\n\r\nconst AUTH = 'AUTH';\r\nconst SET_USER_DATA = 'SET_USER_DATA';\r\nconst SET_USER_DATA_ROLE = 'SET_USER_DATA_ROLE';\r\nconst SET_ORDERS = 'SET_ORDERS';\r\n\r\nlet ath;\r\n(localStorage.getItem('id') == null) ? (ath = true) : ath = localStorage.getItem('id')\r\n\r\nlet initialState = {\r\n    isAuth: ath,\r\n    userData: [],\r\n    userDataRole: [],\r\n    orders: []\r\n};\r\n\r\nlet appReducer = (state = initialState, action) => {\r\n    switch (action.type) {\r\n        case AUTH:\r\n            return {\r\n                ...state,\r\n                isAuth: action.isAuth\r\n            };\r\n        case SET_USER_DATA:\r\n            return {\r\n                ...state,\r\n                userData: action.userData\r\n            };\r\n        case SET_USER_DATA_ROLE:\r\n            return {\r\n                ...state,\r\n                userDataRole: action.userDataRole\r\n            };\r\n        case SET_ORDERS:\r\n            return {\r\n                ...state,\r\n                orders: action.orders\r\n            };\r\n        default:\r\n            return state\r\n    }\r\n};\r\n\r\nexport const setIsAuth = (isAuth) => {\r\n    return {\r\n        type: AUTH,\r\n        isAuth\r\n    }\r\n};\r\n\r\nexport const setUserData = (userData) => {\r\n    return {\r\n        type: SET_USER_DATA,\r\n        userData\r\n    }\r\n};\r\n\r\nexport const setUserDataRole = (userDataRole) => {\r\n    return {\r\n        type: SET_USER_DATA_ROLE,\r\n        userDataRole\r\n    }\r\n};\r\n\r\nexport const setOrders = (orders) => {\r\n    return {\r\n        type: SET_ORDERS,\r\n        orders\r\n    }\r\n};\r\n\r\nexport const setUserDataQ = (currentUserId) => async (dispatch) => {\r\n    let response = await getCurUsD(currentUserId);\r\n    dispatch(setUserData(response.data))\r\n}\r\n\r\nexport const setUserDataRoleQ = (currentUserId) => async (dispatch) => {\r\n    let response = await getCurUsRoleD(currentUserId);\r\n    dispatch(setUserDataRole(response.data))\r\n}\r\n\r\nexport const setCurOrders = (currentUserId) => async (dispatch) => {\r\n    let response = await getOrders(currentUserId);\r\n    dispatch(setOrders(response.data))\r\n}\r\n\r\nexport default appReducer;\r\n"]},"metadata":{},"sourceType":"module"}