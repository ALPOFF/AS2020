{"ast":null,"code":"import React,{useEffect}from'react';import'./SignIn.css';import{NavLink}from\"react-router-dom\";import SignInReduxForm from\"../ReduxForms/SignInReduxForm/SignInReduxForm\";import LogoDronTaxi from\"../../resources/icon-svg/LogoDronTaxi.svg\";import{ReactSVG}from'react-svg';import{connect}from\"react-redux\";import*as axios from\"axios\";import{Redirect}from\"react-router\";import{setIsAuth,setUserDataQ}from\"../../state/app-reducer\";var SignIn=function SignIn(props){var onSubmit=function onSubmit(formData){console.log(formData.email.length);axios.post('http://localhost:5000/auth',{email:formData.email,password:formData.password}).then(function(res){console.log(res.data);if(res.data.status==false){localStorage.setItem('id',\"\".concat(res.data.status));localStorage.setItem('user_id',\"\".concat(res.data.id));props.setIsAuth(\"\".concat(res.data.status));}else{console.log('error');}});};return props.isAuth=='false'?/*#__PURE__*/React.createElement(Redirect,{to:\"/profile\"}):/*#__PURE__*/React.createElement(\"div\",{className:\"SignIn\"},/*#__PURE__*/React.createElement(\"div\",{style:{height:10,display:\"flex\",alignItems:\"center\",paddingTop:30,paddingLeft:10}},/*#__PURE__*/React.createElement(ReactSVG,{src:LogoDronTaxi}),/*#__PURE__*/React.createElement(\"h3\",{style:{}},\"DRON TAXI\")),/*#__PURE__*/React.createElement(\"div\",{className:\"SignIn\"},/*#__PURE__*/React.createElement(\"div\",{className:\"SignInWrapper\"},/*#__PURE__*/React.createElement(\"h5\",null,\"\\u0410\\u0412\\u0422\\u041E\\u0420\\u0418\\u0417\\u0410\\u0426\\u0418\\u042F\"),/*#__PURE__*/React.createElement(SignInReduxForm,{onSubmit:onSubmit}),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(NavLink,{to:\"/signup\"},/*#__PURE__*/React.createElement(\"button\",null,\"\\u0420\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0430\\u0446\\u0438\\u044F\"))))));};var mapStateToProps=function mapStateToProps(state){return{isAuth:state.appReducer.isAuth};};export default connect(mapStateToProps,{setIsAuth:setIsAuth,setUserDataQ:setUserDataQ})(SignIn);","map":{"version":3,"sources":["D:/web/AS2020/web/dron-taxi-web/src/components/SignIn/SignIn.jsx"],"names":["React","useEffect","NavLink","SignInReduxForm","ReactSVG","connect","axios","Redirect","setIsAuth","setUserDataQ","SignIn","props","onSubmit","formData","console","log","email","length","post","password","then","res","data","status","localStorage","setItem","id","isAuth","height","display","alignItems","paddingTop","paddingLeft","LogoDronTaxi","mapStateToProps","state","appReducer"],"mappings":"AAAA,MAAOA,CAAAA,KAAP,EAAeC,SAAf,KAA+B,OAA/B,CACA,MAAO,cAAP,CACA,OAAQC,OAAR,KAAsB,kBAAtB,CACA,MAAOC,CAAAA,eAAP,KAA4B,+CAA5B,C,oEAEA,OAAQC,QAAR,KAAuB,WAAvB,CACC,OAAQC,OAAR,KAAsB,aAAtB,CACD,MAAO,GAAKC,CAAAA,KAAZ,KAAuB,OAAvB,CACA,OAAQC,QAAR,KAAuB,cAAvB,CACA,OAAQC,SAAR,CAAmBC,YAAnB,KAAsC,yBAAtC,CAEA,GAAMC,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,CAACC,KAAD,CAAW,CAEtB,GAAIC,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,CAACC,QAAD,CAAc,CACzBC,OAAO,CAACC,GAAR,CAAYF,QAAQ,CAACG,KAAT,CAAeC,MAA3B,EACAX,KAAK,CAACY,IAAN,CAAW,4BAAX,CAAyC,CAACF,KAAK,CAAEH,QAAQ,CAACG,KAAjB,CAAwBG,QAAQ,CAAEN,QAAQ,CAACM,QAA3C,CAAzC,EAA+FC,IAA/F,CAAoG,SAAAC,GAAG,CAAI,CACvGP,OAAO,CAACC,GAAR,CAAYM,GAAG,CAACC,IAAhB,EACA,GAAID,GAAG,CAACC,IAAJ,CAASC,MAAT,EAAmB,KAAvB,CAA8B,CAC1BC,YAAY,CAACC,OAAb,CAAqB,IAArB,WAA8BJ,GAAG,CAACC,IAAJ,CAASC,MAAvC,GACAC,YAAY,CAACC,OAAb,CAAqB,SAArB,WAAmCJ,GAAG,CAACC,IAAJ,CAASI,EAA5C,GACAf,KAAK,CAACH,SAAN,WAAmBa,GAAG,CAACC,IAAJ,CAASC,MAA5B,GACH,CAJD,IAIO,CACHT,OAAO,CAACC,GAAR,CAAY,OAAZ,EACH,CACJ,CATD,EAUH,CAZD,CAcA,MAAQJ,CAAAA,KAAK,CAACgB,MAAN,EAAgB,OAAjB,cAA6B,oBAAC,QAAD,EAAU,EAAE,CAAC,UAAb,EAA7B,cACH,2BAAK,SAAS,CAAC,QAAf,eACI,2BAAK,KAAK,CAAE,CAACC,MAAM,CAAE,EAAT,CAAaC,OAAO,CAAE,MAAtB,CAA8BC,UAAU,CAAE,QAA1C,CAAoDC,UAAU,CAAE,EAAhE,CAAoEC,WAAW,CAAE,EAAjF,CAAZ,eACI,oBAAC,QAAD,EAAU,GAAG,CAAEC,YAAf,EADJ,cAEI,0BAAI,KAAK,CAAE,EAAX,cAFJ,CADJ,cAKI,2BAAK,SAAS,CAAC,QAAf,eAEI,2BAAK,SAAS,CAAC,eAAf,eACI,mGADJ,cAEI,oBAAC,eAAD,EAAiB,QAAQ,CAAErB,QAA3B,EAFJ,cAGI,4CACI,oBAAC,OAAD,EAAS,EAAE,CAAC,SAAZ,eACI,uGADJ,CADJ,CAHJ,CAFJ,CALJ,CADJ,CAoBH,CApCD,CAsCA,GAAMsB,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAACC,KAAD,QAAY,CAChCR,MAAM,CAAEQ,KAAK,CAACC,UAAN,CAAiBT,MADO,CAAZ,EAAxB,CAIA,cAAetB,CAAAA,OAAO,CAAC6B,eAAD,CAAkB,CAAC1B,SAAS,CAATA,SAAD,CAAYC,YAAY,CAAZA,YAAZ,CAAlB,CAAP,CAAoDC,MAApD,CAAf","sourcesContent":["import React, {useEffect} from 'react';\r\nimport './SignIn.css'\r\nimport {NavLink} from \"react-router-dom\";\r\nimport SignInReduxForm from \"../ReduxForms/SignInReduxForm/SignInReduxForm\";\r\nimport LogoDronTaxi from '../../resources/icon-svg/LogoDronTaxi.svg'\r\nimport {ReactSVG} from 'react-svg'\r\n import {connect} from \"react-redux\";\r\nimport * as axios from \"axios\";\r\nimport {Redirect} from \"react-router\";\r\nimport {setIsAuth, setUserDataQ} from \"../../state/app-reducer\";\r\n\r\nconst SignIn = (props) => {\r\n\r\n    let onSubmit = (formData) => {\r\n        console.log(formData.email.length)\r\n        axios.post('http://localhost:5000/auth', {email: formData.email, password: formData.password}).then(res => {\r\n            console.log(res.data)\r\n            if (res.data.status == false) {\r\n                localStorage.setItem('id', `${res.data.status}`)\r\n                localStorage.setItem('user_id', `${res.data.id}`)\r\n                props.setIsAuth(`${res.data.status}`)\r\n            } else {\r\n                console.log('error')\r\n            }\r\n        })\r\n    }\r\n\r\n    return (props.isAuth == 'false') ?  <Redirect to=\"/profile\" /> : (\r\n        <div className=\"SignIn\">\r\n            <div style={{height: 10, display: \"flex\", alignItems: \"center\", paddingTop: 30, paddingLeft: 10}}>\r\n                <ReactSVG src={LogoDronTaxi}/>\r\n                <h3 style={{}}>DRON TAXI</h3>\r\n            </div>\r\n            <div className=\"SignIn\">\r\n\r\n                <div className=\"SignInWrapper\">\r\n                    <h5>АВТОРИЗАЦИЯ</h5>\r\n                    <SignInReduxForm onSubmit={onSubmit}/>\r\n                    <div>\r\n                        <NavLink to=\"/signup\">\r\n                            <button>Регистрация</button>\r\n                        </NavLink>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n    isAuth: state.appReducer.isAuth\r\n})\r\n\r\nexport default connect(mapStateToProps, {setIsAuth, setUserDataQ})(SignIn);\r\n"]},"metadata":{},"sourceType":"module"}